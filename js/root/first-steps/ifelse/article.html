<h1 id="条件分支：if-和-">条件分支：if 和 &#39;?&#39;</h1>
<p>有时我们需要根据不同条件执行不同的操作。</p>
<p>我们可以使用 <code>if</code> 语句和条件运算符 <code>?</code>（也称为“问号”运算符）来实现。</p>
<h2 id="if-语句">&quot;if&quot; 语句</h2>
<p><code>if(...)</code> 语句计算括号里的条件表达式，如果计算结果是 <code>true</code>，就会执行对应的代码块。</p>
<p>例如：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> year = prompt(<span class="hljs-string">&#x27;In which year was ECMAScript-2015 specification published?&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

*!*
<span class="hljs-keyword">if</span> (year == <span class="hljs-number">2015</span>) alert( <span class="hljs-string">&#x27;You are right!&#x27;</span> );
*/!*</code></pre>
<p>在上面这个例子中，条件是一个简单的相等性检查（<code>year == 2015</code>），但它还可以更复杂。</p>
<p>如果有多个语句要执行，我们必须将要执行的代码块封装在大括号内：</p>
<pre><code class="language-js"><span class="hljs-keyword">if</span> (year == <span class="hljs-number">2015</span>) {
  alert( <span class="hljs-string">&quot;That&#x27;s correct!&quot;</span> );
  alert( <span class="hljs-string">&quot;You&#x27;re so smart!&quot;</span> );
}</code></pre>
<p>建议每次使用 if 语句都用大括号 <code>{}</code> 来包装代码块，即使只有一条语句。这样可以提高代码可读性。</p>
<h2 id="布尔转换">布尔转换</h2>
<p><code>if (…)</code> 语句会计算圆括号内的表达式，并将计算结果转换为布尔型。</p>
<p>让我们回顾一下 <a href="info:type-conversions">info:type-conversions</a> 一章中的转换规则：</p>
<ul>
<li>数字 <code>0</code>、空字符串 <code>&quot;&quot;</code>、<code>null</code>、<code>undefined</code> 和 <code>NaN</code> 都会被转换成 <code>false</code>。因为它们被称为 &quot;falsy&quot; 值。</li>
<li>其他值被转换为 <code>true</code>，所以它们被称为 &quot;truthy&quot;。</li>
</ul>
<p>所以，下面这个条件下的代码永远不会执行：</p>
<pre><code class="language-js"><span class="hljs-keyword">if</span> (<span class="hljs-number">0</span>) { <span class="hljs-comment">// 0 是 falsy</span>
  ...
}</code></pre>
<p>……但下面的条件 —— 始终有效：</p>
<pre><code class="language-js"><span class="hljs-keyword">if</span> (<span class="hljs-number">1</span>) { <span class="hljs-comment">// 1 是 truthy</span>
  ...
}</code></pre>
<p>我们也可以将未计算的布尔值传入 <code>if</code> 语句，像这样：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> cond = (year == <span class="hljs-number">2015</span>); <span class="hljs-comment">// 相等运算符的结果是 true 或 false</span>

<span class="hljs-keyword">if</span> (cond) {
  ...
}</code></pre>
<h2 id="else-语句">&quot;else&quot; 语句</h2>
<p><code>if</code> 语句有时会包含一个可选的 &quot;else&quot; 块。如果判断条件不成立，就会执行它内部的代码。</p>
<p>例如：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> year = prompt(<span class="hljs-string">&#x27;In which year was ECMAScript-2015 specification published?&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

<span class="hljs-keyword">if</span> (year == <span class="hljs-number">2015</span>) {
  alert( <span class="hljs-string">&#x27;You guessed it right!&#x27;</span> );
} <span class="hljs-keyword">else</span> {
  alert( <span class="hljs-string">&#x27;How can you be so wrong?&#x27;</span> ); <span class="hljs-comment">// 2015 以外的任何值</span>
}</code></pre>
<h2 id="多个条件：else-if">多个条件：&quot;else if&quot;</h2>
<p>有时我们需要测试一个条件的几个变体。我们可以通过使用 <code>else if</code> 子句实现。</p>
<p>例如：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> year = prompt(<span class="hljs-string">&#x27;In which year was ECMAScript-2015 specification published?&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

<span class="hljs-keyword">if</span> (year &lt; <span class="hljs-number">2015</span>) {
  alert( <span class="hljs-string">&#x27;Too early...&#x27;</span> );
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (year &gt; <span class="hljs-number">2015</span>) {
  alert( <span class="hljs-string">&#x27;Too late&#x27;</span> );
} <span class="hljs-keyword">else</span> {
  alert( <span class="hljs-string">&#x27;Exactly!&#x27;</span> );
}</code></pre>
<p>在上面的代码中，JavaScript 先先检查 <code>year &lt; 2015</code>。如果条件不符合，就会转到下一个条件 <code>year &gt; 2015</code>。如果这个条件也不符合，则会显示最后一个 <code>alert</code>。</p>
<p>可以有更多的 <code>else if</code> 块。结尾的 <code>else</code> 是可选的。</p>
<h2 id="条件运算符-">条件运算符 &#39;?&#39;</h2>
<p>有时我们需要根据一个条件去赋值一个变量。</p>
<p>如下所示：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> accessAllowed;
<span class="hljs-keyword">let</span> age = prompt(<span class="hljs-string">&#x27;How old are you?&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

*!*
<span class="hljs-keyword">if</span> (age &gt; <span class="hljs-number">18</span>) {
  accessAllowed = <span class="hljs-literal">true</span>;
} <span class="hljs-keyword">else</span> {
  accessAllowed = <span class="hljs-literal">false</span>;
}
*/!*

alert(accessAllowed);</code></pre>
<p>所谓的“条件”或“问号”运算符让我们可以更简短地达到目的。</p>
<p>这个运算符通过问号 <code>?</code> 表示。有时它被称为三元运算符，被称为“三元”是因为该运算符中有三个操作数。实际上它是 JavaScript 中唯一一个有这么多操作数的运算符。</p>
<p>语法：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> result = condition ? value1 : value2;</code></pre>
<p>计算条件结果，如果结果为真，则返回 <code>value1</code>，否则返回 <code>value2</code>。</p>
<p>例如：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> accessAllowed = (age &gt; <span class="hljs-number">18</span>) ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;</code></pre>
<p>技术上讲，我们可以省略 <code>age &gt; 18</code> 外面的括号。问号运算符的优先级较低，所以它会在比较运算符 <code>&gt;</code> 后执行。</p>
<p>下面这个示例会执行和前面那个示例相同的操作：</p>
<pre><code class="language-js"><span class="hljs-comment">// 比较运算符 &quot;age &gt; 18&quot; 首先执行</span>
<span class="hljs-comment">//（不需要将其包含在括号中）</span>
<span class="hljs-keyword">let</span> accessAllowed = age &gt; <span class="hljs-number">18</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;</code></pre>
<p>但括号可以使代码可读性更强，所以我们建议使用它们。</p>
<pre><code class="language-smart">在上面的例子中，你可以不使用问号运算符，因为比较本身就返回 `true/false`：

```js
// 下面代码同样可以实现
let accessAllowed = age &gt; 18;
```</code></pre>
<h2 id="多个-">多个 &#39;?&#39;</h2>
<p>使用一系列问号 <code>?</code> 运算符可以返回一个取决于多个条件的值。</p>
<p>例如：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> age = prompt(<span class="hljs-string">&#x27;age?&#x27;</span>, <span class="hljs-number">18</span>);

<span class="hljs-keyword">let</span> message = (age &lt; <span class="hljs-number">3</span>) ? <span class="hljs-string">&#x27;Hi, baby!&#x27;</span> :
  (age &lt; <span class="hljs-number">18</span>) ? <span class="hljs-string">&#x27;Hello!&#x27;</span> :
  (age &lt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&#x27;Greetings!&#x27;</span> :
  <span class="hljs-string">&#x27;What an unusual age!&#x27;</span>;

alert( message );</code></pre>
<p>可能很难一下子看出发生了什么。但经过仔细观察，我们可以看到它只是一个普通的检查序列。</p>
<ol>
<li>第一个问号检查 <code>age &lt; 3</code>。</li>
<li>如果为真 — 返回 <code>&#39;Hi, baby!&#39;</code>。否则，会继续执行冒号 <code>&quot;:&quot;</code> 后的表达式，检查 <code>age &lt; 18</code>。</li>
<li>如果为真 — 返回 <code>&#39;Hello!&#39;</code>。否则，会继续执行下一个冒号 <code>&quot;:&quot;</code> 后的表达式，检查 <code>age &lt; 100</code>。</li>
<li>如果为真 — 返回 <code>&#39;Greetings!&#39;</code>。否则，会继续执行最后一个冒号 <code>&quot;:&quot;</code> 后面的表达式，返回 <code>&#39;What an unusual age!&#39;</code>。</li>
</ol>
<p>这是使用 <code>if..else</code> 实现上面的逻辑的写法：</p>
<pre><code class="language-js"><span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">3</span>) {
  message = <span class="hljs-string">&#x27;Hi, baby!&#x27;</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">18</span>) {
  message = <span class="hljs-string">&#x27;Hello!&#x27;</span>;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">100</span>) {
  message = <span class="hljs-string">&#x27;Greetings!&#x27;</span>;
} <span class="hljs-keyword">else</span> {
  message = <span class="hljs-string">&#x27;What an unusual age!&#x27;</span>;
}</code></pre>
<h2 id="-的非常规使用">&#39;?&#39; 的非常规使用</h2>
<p>有时可以使用问号 <code>?</code> 来代替 <code>if</code> 语句：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> company = prompt(<span class="hljs-string">&#x27;Which company created JavaScript?&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

*!*
(company == <span class="hljs-string">&#x27;Netscape&#x27;</span>) ?
   alert(<span class="hljs-string">&#x27;Right!&#x27;</span>) : alert(<span class="hljs-string">&#x27;Wrong.&#x27;</span>);
*/!*</code></pre>
<p>根据条件 <code>company ==&#39;Netscape&#39;</code>，要么执行 <code>?</code> 后面的第一个表达式并显示对应内容，要么执行第二个表达式并显示对应内容。</p>
<p>在这里我们不是把结果赋值给变量。而是根据条件执行不同的代码。</p>
<p><strong>不建议这样使用问号运算符。</strong></p>
<p>这种写法比 <code>if</code> 语句更短，对一些程序员很有吸引力。但它的可读性差。</p>
<p>下面是使用 <code>if</code> 语句实现相同功能的代码，进行下比较：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> company = prompt(<span class="hljs-string">&#x27;Which company created JavaScript?&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>);

*!*
<span class="hljs-keyword">if</span> (company == <span class="hljs-string">&#x27;Netscape&#x27;</span>) {
  alert(<span class="hljs-string">&#x27;Right!&#x27;</span>);
} <span class="hljs-keyword">else</span> {
  alert(<span class="hljs-string">&#x27;Wrong.&#x27;</span>);
}
*/!*</code></pre>
<p>因为我们的眼睛垂直扫描代码。所以，跨越几行的代码块比长而水平的代码更易于理解。</p>
<p>问号 <code>?</code> 的作用是根据条件返回一个或另一个值。请正确使用它。当需要执行不同的代码分支时，请使用 <code>if</code>。</p>
