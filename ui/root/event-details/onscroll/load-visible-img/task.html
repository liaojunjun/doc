<p>importance: 4</p>
<hr>
<h1 id="加载可视化图像">加载可视化图像</h1>
<p>假设我们有一个速度较慢的客户端，并且希望节省它们在移动端的流量。</p>
<p>为此，我们决定不立即显示图像，而是将其替换为占位符，如下所示：</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> *!*<span class="hljs-attr">src</span>=<span class="hljs-string">&quot;placeholder.svg&quot;</span>*/!* <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;128&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;128&quot;</span> *!*<span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;real.jpg&quot;</span>*/!*&gt;</span></code></pre>
<p>因此，最初所有图像均为 <code>placeholder.svg</code>。当页面滚动到用户可以看到图像位置时 —— 我们就会将 <code>src</code> 更改为 <code>data-src</code> 的 <code>src</code>，从而加载图像。</p>
<p>这是在 <code>iframe</code> 中的一个示例：</p>
<p>[iframe src=&quot;solution&quot;]</p>
<p>滚动它可以看到图像是“按需”加载的。</p>
<p>要求：</p>
<ul>
<li>加载页面时，屏幕上的那些图像应该在滚动之前立即加载。</li>
<li>有些图像可能是常规图像，没有 <code>data-src</code>。代码不应该改动它们。</li>
<li>一旦图像被加载，它就不应该在滚动进/出时被重新加载。</li>
</ul>
<p>P.S. 如果你有能力，可以创建一个更高级的解决方案，以“预加载”当前位置下方/之后一页的图像。</p>
<p>P.P.S. 仅处理垂直滚动，不处理水平滚动。</p>
