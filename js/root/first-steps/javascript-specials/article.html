<h1 id="javascript-特性">JavaScript 特性</h1>
<p>本章简要回顾我们到现在为止学到的 JavaScript 特性，并特别注意了一些细节。</p>
<h2 id="代码结构">代码结构</h2>
<p>语句用分号分隔：</p>
<pre><code class="language-js">alert(<span class="hljs-string">&#x27;Hello&#x27;</span>); alert(<span class="hljs-string">&#x27;World&#x27;</span>);</code></pre>
<p>通常，换行符也被视为分隔符，因此下面的例子也能正常运行：</p>
<pre><code class="language-js">alert(<span class="hljs-string">&#x27;Hello&#x27;</span>)
alert(<span class="hljs-string">&#x27;World&#x27;</span>)</code></pre>
<p>这就是所谓的「自动分号插入」。但有时它不起作用，例如：</p>
<pre><code class="language-js">alert(<span class="hljs-string">&quot;There will be an error after this message&quot;</span>)

[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>].forEach(alert)</code></pre>
<p>大多数代码风格指南都认为我们应该在每个语句后面都加上分号。</p>
<p>在代码块 <code>{...}</code> 后以及有代码块的语法结构（例如循环）后不需要加分号：</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// 函数声明后不需要加分号</span>
}

<span class="hljs-keyword">for</span>(;;) {
  <span class="hljs-comment">// 循环语句后不需要加分号</span>
}</code></pre>
<p>……但即使我们在某处添加了「额外的」分号，这也不是错误。分号会被忽略的。</p>
<p>更多内容：<a href="info:structure">info:structure</a>。</p>
<h2 id="严格模式">严格模式</h2>
<p>为了完全启用现代 JavaScript 的所有特性，我们应该在脚本顶部写上 <code>&quot;use strict&quot;</code> 指令。</p>
<pre><code class="language-js"><span class="hljs-meta">&#x27;use strict&#x27;</span>;

...</code></pre>
<p>该指令必须位于 JavaScript 脚本的顶部或函数体的开头。</p>
<p>如果没有 <code>&quot;use strict&quot;</code>，所有东西仍可以正常工作，但是某些特性的表现方式与旧式「兼容」方式相同。我们通常更喜欢现代的方式。</p>
<p>语言的一些现代特征（比如我们将来要学习的类）会隐式地启用严格模式。</p>
<p>更多内容：<a href="info:strict-mode">info:strict-mode</a>。</p>
<h2 id="变量">变量</h2>
<p>可以使用以下方式声明变量：</p>
<ul>
<li><code>let</code></li>
<li><code>const</code>（不变的，不能被改变）</li>
<li><code>var</code>（旧式的，稍后会看到）</li>
</ul>
<p>一个变量名可以由以下组成：</p>
<ul>
<li>字母和数字，但是第一个字符不能是数字。</li>
<li>字符 <code>$</code> 和 <code>_</code> 是允许的，用法同字母。</li>
<li>非拉丁字母和象形文字也是允许的，但通常不会使用。</li>
</ul>
<p>变量是动态类型的，它们可以存储任何值：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> x = <span class="hljs-number">5</span>;
x = <span class="hljs-string">&quot;John&quot;</span>;</code></pre>
<p>有 8 种数据类型：</p>
<ul>
<li><code>number</code> — 可以是浮点数，也可以是整数，</li>
<li><code>bigint</code> — 用于任意长度的整数，</li>
<li><code>string</code> — 字符串类型，</li>
<li><code>boolean</code> — 逻辑值：<code>true/false</code>，</li>
<li><code>null</code> — 具有单个值 <code>null</code> 的类型，表示“空”或“不存在”，</li>
<li><code>undefined</code> — 具有单个值 <code>undefined</code> 的类型，表示“未分配（未定义）”，</li>
<li><code>object</code> 和 <code>symbol</code> — 对于复杂的数据结构和唯一标识符，我们目前还没学习这个类型。</li>
</ul>
<p><code>typeof</code> 运算符返回值的类型，但有两个例外：</p>
<pre><code class="language-js"><span class="hljs-keyword">typeof</span> <span class="hljs-literal">null</span> == <span class="hljs-string">&quot;object&quot;</span> <span class="hljs-comment">// JavaScript 编程语言的设计错误</span>
<span class="hljs-keyword">typeof</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{} == <span class="hljs-string">&quot;function&quot;</span> <span class="hljs-comment">// 函数被特殊对待</span></code></pre>
<p>更多内容：<a href="info:variables">info:variables</a> 和 <a href="info:types">info:types</a>。</p>
<h2 id="交互">交互</h2>
<p>我们使用浏览器作为工作环境，所以基本的 UI 功能将是：</p>
<p><a href="mdn:api/Window/prompt"><code>prompt(question[, default])</code></a>
: 提出一个问题，并返回访问者输入的内容，如果他按下「取消」则返回 <code>null</code>。</p>
<p><a href="mdn:api/Window/confirm"><code>confirm(question)</code></a>
: 提出一个问题，并建议用户在“确定”和“取消”之间进行选择。选择结果以 <code>true/false</code> 形式返回。</p>
<p><a href="mdn:api/Window/alert"><code>alert(message)</code></a>
: 输出一个 <code>消息</code>。</p>
<p>这些函数都会产生 <strong>模态框</strong>，它们会暂停代码执行并阻止访问者与页面的其他部分进行交互，直到用户做出回答为止。</p>
<p>举个例子：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> userName = prompt(<span class="hljs-string">&quot;Your name?&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>);
<span class="hljs-keyword">let</span> isTeaWanted = confirm(<span class="hljs-string">&quot;Do you want some tea?&quot;</span>);

alert( <span class="hljs-string">&quot;Visitor: &quot;</span> + userName ); <span class="hljs-comment">// Alice</span>
alert( <span class="hljs-string">&quot;Tea wanted: &quot;</span> + isTeaWanted ); <span class="hljs-comment">// true</span></code></pre>
<p>更多内容：<a href="info:alert-prompt-confirm">info:alert-prompt-confirm</a>。</p>
<h2 id="运算符">运算符</h2>
<p>JavaScript 支持以下运算符：</p>
<p>算数运算符
: 常规的：<code>+ - * /</code>（加减乘除），取余运算符 <code>%</code> 和幂运算符 <code>**</code>。</p>
<pre><code>二进制加号 `+` 可以连接字符串。如果任何一个操作数是一个字符串，那么另一个操作数也将被转换为字符串：

```js
alert( &#x27;1&#x27; + 2 ); // &#x27;12&#x27;，字符串
alert( 1 + &#x27;2&#x27; ); // &#x27;12&#x27;，字符串
```</code></pre>
<p>赋值
: 简单的赋值：<code>a = b</code> 和合并了其他操作的赋值：<code>a * = 2</code>。</p>
<p>按位运算符
: 按位运算符在最低位级上操作 32 位的整数：详见 <a href="mdn:/JavaScript/Reference/Operators/Bitwise_Operators">文档</a>。</p>
<p>三元运算符
: 唯一具有三个参数的操作：<code>cond ? resultA : resultB</code>。如果 <code>cond</code> 是真的，则返回 <code>resultA</code>，否则返回 <code>resultB</code>。</p>
<p>逻辑运算符
: 逻辑与 <code>&amp;&amp;</code> 和或 <code>||</code> 执行短路运算，然后返回运算停止处的值（<code>true</code>/<code>false</code> 不是必须的）。逻辑非 <code>!</code> 将操作数转换为布尔值并返回其相反的值。</p>
<p>空值合并运算符
: <code>??</code> 运算符从一列变量中，选取值为已定义的值（defined value）的变量。<code>a ?? b</code> 的结果是 <code>a</code>，除非 <code>a</code> 为 <code>null/undefined</code>，这时结果是 <code>b</code>。</p>
<p>比较运算符
: 对不同类型的值进行相等检查时，运算符 <code>==</code> 会将不同类型的值转换为数字（除了 <code>null</code> 和 <code>undefined</code>，它们彼此相等而没有其他情况），所以下面的例子是相等的：</p>
<pre><code>```js
alert( 0 == false ); // true
alert( 0 == &#x27;&#x27; ); // true
```

其他比较也将转换为数字。

严格相等运算符 `===` 不会进行转换：不同的类型总是指不同的值。

值 `null` 和 `undefined` 是特殊的：它们只在 `==` 下相等，且不相等于其他任何值。

大于/小于比较，在比较字符串时，会按照字符顺序逐个字符地进行比较。其他类型则被转换为数字。</code></pre>
<p>其他运算符
: 还有很少一部分其他运算符，如逗号运算符。</p>
<p>更多内容：<a href="info:operators">info:operators</a>，<a href="info:comparison">info:comparison</a>，<a href="info:logical-operators">info:logical-operators</a>，<a href="info:nullish-coalescing-operator">info:nullish-coalescing-operator</a>。</p>
<h2 id="循环">循环</h2>
<ul>
<li><p>我们涵盖了 3 种类型的循环：</p>
<pre><code class="language-js"><span class="hljs-comment">// 1</span>
<span class="hljs-keyword">while</span> (condition) {
  ...
}

<span class="hljs-comment">// 2</span>
<span class="hljs-keyword">do</span> {
  ...
} <span class="hljs-keyword">while</span> (condition);

<span class="hljs-comment">// 3</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  ...
}</code></pre>
</li>
<li><p>在 <code>for(let...)</code> 循环内部声明的变量，只在该循环内可见。但我们也可以省略 <code>let</code> 并重用已有的变量。</p>
</li>
<li><p>指令 <code>break/continue</code> 允许退出整个循环/当前迭代。使用标签来打破嵌套循环。</p>
</li>
</ul>
<p>更多内容：<a href="info:while-for">info:while-for</a>。</p>
<p>稍后我们将学习更多类型的循环来处理对象。</p>
<h2 id="switch-结构">&quot;switch&quot; 结构</h2>
<p>&quot;switch&quot; 结构可以替代多个 <code>if</code> 检查。它内部使用 <code>===</code>（严格相等）进行比较。</p>
<p>例如：</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> age = prompt(<span class="hljs-string">&#x27;Your age?&#x27;</span>, <span class="hljs-number">18</span>);

<span class="hljs-keyword">switch</span> (age) {
  <span class="hljs-keyword">case</span> <span class="hljs-number">18</span>:
    alert(<span class="hljs-string">&quot;Won&#x27;t work&quot;</span>); <span class="hljs-comment">// prompt 的结果是一个字符串，而不是数字</span>
    <span class="hljs-keyword">break</span>;

  <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;18&quot;</span>:
    alert(<span class="hljs-string">&quot;This works!&quot;</span>);
    <span class="hljs-keyword">break</span>;

  <span class="hljs-keyword">default</span>:
    alert(<span class="hljs-string">&quot;Any value not equal to one above&quot;</span>);
}</code></pre>
<p>详情请见：<a href="info:switch">info:switch</a>。</p>
<h2 id="函数">函数</h2>
<p>我们介绍了三种在 JavaScript 中创建函数的方式：</p>
<ol>
<li><p>函数声明：主代码流中的函数</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">let</span> result = a + b;

  <span class="hljs-keyword">return</span> result;
}</code></pre>
</li>
<li><p>函数表达式：表达式上下文中的函数</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> sum = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">let</span> result = a + b;

  <span class="hljs-keyword">return</span> result;
}</code></pre>
</li>
<li><p>箭头函数：</p>
<pre><code class="language-js"><span class="hljs-comment">// 表达式在右侧</span>
<span class="hljs-keyword">let</span> sum = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;

<span class="hljs-comment">// 或带 {...} 的多行语法，此处需要 return：</span>
<span class="hljs-keyword">let</span> sum = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-comment">// 没有参数</span>
<span class="hljs-keyword">let</span> sayHi = <span class="hljs-function">() =&gt;</span> alert(<span class="hljs-string">&quot;Hello&quot;</span>);

<span class="hljs-comment">// 有一个参数</span>
<span class="hljs-keyword">let</span> double = <span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n * <span class="hljs-number">2</span>;</code></pre>
</li>
</ol>
<ul>
<li>函数可能具有局部变量：在函数内部声明的变量。这类变量只在函数内部可见。</li>
<li>参数可以有默认值：<code>function sum(a = 1, b = 2) {...}</code>。</li>
<li>函数总是返回一些东西。如果没有 <code>return</code> 语句，那么返回的结果是 <code>undefined</code>。</li>
</ul>
<p>详细内容：请见 <a href="info:function-basics">info:function-basics</a>，<a href="info:arrow-functions-basics">info:arrow-functions-basics</a>。</p>
<h2 id="更多内容">更多内容</h2>
<p>这些是 JavaScript 特性的简要概述。截至目前，我们仅仅学习了基础知识。随着教程的深入，你会发现 JavaScript 的更多特性和高级特性。</p>
